\section{Технологический раздел}

\subsection{Средства реализации}

Основным языком программирования является мультипарадигменный язык Rust~\cite{rust}.
\begin{itemize}
    \item[$-$] Одно из главных достоинств данного языка это гарантия безопасной работы с памятью при помощи системы
            статической проверки ссылок, так называемый \texttt{Borrow Checker}~\cite{borrow-checker}.
    \item[$-$] Отсутствие сборщика мусора, как следствие, более экономная работа с ресурсами.
    \item[$-$] Встроенный компилятор, постaвляемый совместно с пакетным менеджером \texttt{Cargo}.
    \item[$-$] Кросс-платформенность, от \texttt{UNIX} и \texttt{MacOS} приложений до Web - приложений.
    \item[$-$] \texttt{SurrealDB} написан на языке \texttt{Rust}, в следствии чего инструментарий языка наиболее плотно работает с непосредственно самой базой данных.
    \item[$-$] Важно отметить, что язык программирования \texttt{Rust} сопоставим по скорости с такими языками как \texttt{С}~\cite{c-rust} и \texttt{С++}~\cite{cpp-rust},
    предоставляя в то же время более широкий функционал для тестирования кода и контроля памяти.
\end{itemize}

Также в рамках языка \texttt{Rust} был выбран фреймворк \texttt{Tauri}. 
\texttt{Tauri} используется для создания приложений с использованием комбинации инструментов \texttt{Rust} и \texttt{HTML}, отображаемых в \texttt{Webview}. 
Приложения, созданные с помощью \texttt{Tauri}, могут поставляться с любым количеством дополнительных \texttt{JS API} и \texttt{Rust API}, так что \texttt{Webview} может управлять системой посредством передачи сообщений. 
Разработчики могут расширить API за счет своей собственной функциональности и легко объединить \texttt{Webview} и серверную часть на основе \texttt{Rust}~\cite{tauri}.
На рисунке~\ref{img:tauri_new} изображена общая архитектура \texttt{Tauri}-приложения.

\img{100mm}
{tauri_new}
{Принцип работы \texttt{Tauri}}

\subsection{Детали реализации}
На листинге~\ref{lst:rep} представлены трейты, аналог интерфейса в языке \texttt{Rust}, необходимые для реализации репозитория, который отвечает за взаимодействие между публичным \texttt{API} и непосредственно с базой данных.

\begin{lstinputlisting}[
        caption={\raggedrightТрейты, необходимые для реализации репозитория.},
        label={lst:rep},
        language={rust},
        style={rustlang}
        % linerange={1-58}
    ]{../../src-tauri/src/repository/mod.rs}
\end{lstinputlisting}

На листинге~\ref{lst:rep-impl} представлена реализация репозитория и моделей, необходимых для трансляции данных из \texttt{SurrealDB} в пространство языка \texttt{Rust}.
\begin{lstinputlisting}[
        caption={\raggedrightРеализация репозитория.},
        label={lst:rep-impl},
        style={rustlang},
        language={rust},
        linerange={81-225}
    ]{../../src-tauri/src/repository/surrealdb.rs}
\end{lstinputlisting}

На листинге~\ref{lst:init} представлены запросы, которые вызываются при инициализации базы данных.
\begin{lstinputlisting}[
        caption={\raggedrightИнициализация базы данных.},
        label={lst:init},
        language={rust},
        style={rustlang}
        % linerange={81-225}
    ]{../../src-tauri/build/init.sql}
\end{lstinputlisting}

На листинге~\ref{lst:api} представлены 3 метода API, которые вызываются со стороны графического интерфейса.
\begin{lstinputlisting}[
        caption={\raggedrightМетоды API.},
        label={lst:api},
        language={rust},
        style={rustlang},
        linerange={16-100}
    ]{../../src-tauri/src/api.rs}
\end{lstinputlisting}

\subsection{Интерфейс программы}
Для работы с БД был разработан графический интерфейс.
Для реализации интерфейса был использован фреймворк \texttt{Next.js} с использованием языка \texttt{Typescript}.
В программного интерфейсе реализованы простейшие операции, связанные с просмотром данных об эксперимента. 
Также добавлены функции входа - выхода из системы.
Графический интерфейс представлен на рисунках~\ref{img:face},~\ref{img:face2},~\ref{img:face3},~\ref{img:face4} и~\ref{img:face5}.

\img{100mm}
{face}
{Страница регистрации нового пользователя}

\img{100mm}
{face2}
{Страница входа в систему}

\img{100mm}
{face5}
{Страница с информацией о пользователе}

\img{100mm}
{face3}
{Страница с доступными экспериментами}

\img{100mm}
{face4}
{Страница с экспериментом}

\clearpage

\subsection*{Вывод}
В данном разделе были представлена средства реализации программного обеспечения, листинги ключевых компонентов системы и пример работы приложения.

% Среда разработки:

%
% В процессе разработки был использован инструмент LSP\cite{lsp} (англ. \textit{Language Server Protocol}), а в частности его реализацию в виде Rust Analyzer~\cite{rust-anal}, позволяющий форматировать исходные коды, а также в процессе их написания обнаружить наличие синтаксических ошибок и некоторых логических, таких как, например, нарушение правила владения\cite{rust-learn}.
%
% В качестве среды разработки был выбран текстовый редактор VIM\cite{vim}, поддерживающий возможность установки плагинов\cite{vim-plugins}, в том числе для работы с LSP\cite{lsp}.
% \subsection{Структура классов}
%
% На рисунках \ref{img:classes_A} - \ref{img:classes_C} представлена структура реализуемых классов.
%
% \img{100mm}
% {classes_A} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
% {Структура классов-объектов} % Подпись рисунка
%
% \begin{itemize}
%     \item Point – класс точки трехмерного пространства. Хранит координаты в пространстве, владеет методами преобразований точки.
%     \item Edge – класс грани. Хранит номера задействованных в грани вершин.
%     \item Light – класс источника света.
%     \item Model - класс модели. Скрывает конкретную реализацию модели(фигуры) и предоставляет единый интерфейс для работы с ней. Владеет методами преобразования модели, а также методами для получения информации о модели.
%     \item Composite - класс композита. Хранит в себе набор моделей, владеет методами для работы с ними.
% \end{itemize}
%
% \img{100mm}
% {classes_C} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
% {Структура классов} % Подпись рисунка
%
% \begin{itemize}
%     \item Drawer – класс, отвечающий за растеризацию сцены. Хранит полотно для отрисовки. Владеет методами алгоритма теневого z-буфера и формирования объекта для отображения рисунка в главном приложении.
%     \item App – точка входа в программу.
%     \item Ui - класс, отвечающий за отображение графического интерфейса.
%     \item TransformManager – абстракция, содержащия методы трансформмации объектов.
%     \item LoadManager - абстракция, содержащия методы загрузки объектов.
%     \item Canvas - класс, отвечающий за отображение сцены.
% \end{itemize}
% \subsection{Реализация алгоритмов}
% В листинге \ref{lst:cg} представлена реализация Z-буффера и Гуро на языке Rust.
% В листинге \ref{lst:frame_model} представлена реализация 3D модели.
%
% \begin{lstinputlisting}[
%         caption={Реализация алгоритмов компьютерной графики.},
%         label={lst:cg},
%         style={rustlang},
%         linerange={33-262}
%     ]{../../../src/app_factory/drawer/drawer_std.rs}
% \end{lstinputlisting}
%
% \begin{lstinputlisting}[
%         caption={Реализация 3D модели.},
%         label={lst:frame_model},
%         style={rustlang},
%         linerange={24-290}
%     ]{../../../src/models/frame_model.rs}
% \end{lstinputlisting}
%
% \subsection{Интерфейс программного обеспечения}
%
% При запуске программы перед пользователем предстает пустая сцена. 
% Для операций над объектами, их модифицирования, для управления камерой или освещением в левой части интерфейса определены соответствующие разделы (рисунок~\ref{img:example}).
%
% \img{100mm}{example}{GUI}
%
% Для создания модели пользователю необходимо нажать на соответствующий раздел и выбрать одно из предложенных тел. Далее в разделе моделей пользоватеь может каких-либо образом изменить необходимую модель. (рисунки ~\ref{img:create}-\ref{img:modify}).
%
% \clearpage
%
% \img{100mm}{create}{Раздел создание модели}
%
% \img{100mm}{modify}{Раздел модифицирования модели}
% Для перемещения по сцене используются клавиши: W – вперед, S – назад, A – влево, D – вправо, Стрелка вверх - вверх, Стрелка вниз - вниз, R и T - вращение камеры, Z и С - поворот камеры. 
% % \clearpage
%
% В разделе камеры находятся следующие параметры: расстояния до ближней и дальней плоскостей пирамиды видимости, угол обзора, позиция камеры в пространстве, углы поворота, скорость перемещения (рисунок~\ref{img:camera}).
%
% \img{100mm}{camera}{Раздел камеры}
%
% \clearpage
%
% На рисунке~\ref{img:example-models} приведен пример работы программы.
%
% \img{100mm}{example-models}{Тестовая сцена}
% \subsection*{Вывод}
%
% В данном разделе были рассмотрены средства, с помощью которых было реализовано ПО, а также представлены структуры классов и листинги кода с реализацией алгоритмов компьютерной графики.
